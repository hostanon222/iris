2024-11-09 19:37:26,946 - INFO - [IRIS] - New connection: ws_20241109_193726_945832
2024-11-09 19:37:26,947 - INFO - [IRIS] - Connection ws_20241109_193726_945832 accepted
2024-11-09 19:37:26,947 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:37:32,425 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:37:32,435 - INFO - [IRIS] - Generated idea: A series of concentric circles emanating from the center point (400,200), intersected by diagonal lines that create a starburst effect.
2024-11-09 19:37:32,436 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:37:32,438 - INFO - [IRIS] - 
Generating instructions for: A series of concentric circles emanating from the center point (400,200), intersected by diagonal lines that create a starburst effect.
2024-11-09 19:37:32,439 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:37:43,502 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:37:43,505 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:37:43,505 - INFO - [IRIS] - Starting drawing: Concentric circles with starburst lines
2024-11-09 19:37:45,824 - INFO - [IRIS] - New connection: ws_20241109_193745_824877
2024-11-09 19:37:45,825 - INFO - [IRIS] - Connection ws_20241109_193745_824877 accepted
2024-11-09 19:37:45,825 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:37:49,675 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:37:50,579 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:37:50,581 - INFO - [IRIS] - Generated idea: A series of concentric circles intersected by diagonal lines radiating from the center point at 400,200.
2024-11-09 19:37:50,581 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:37:50,582 - INFO - [IRIS] - 
Generating instructions for: A series of concentric circles intersected by diagonal lines radiating from the center point at 400,200.
2024-11-09 19:37:50,582 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:37:54,727 - INFO - [IRIS] - New connection: ws_20241109_193754_727269
2024-11-09 19:37:54,727 - INFO - [IRIS] - Connection ws_20241109_193754_727269 accepted
2024-11-09 19:37:54,728 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:37:55,719 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:37:55,721 - INFO - [IRIS] - Generated idea: A series of twelve nested circles centered at (400,200), intersected by diagonal lines radiating from the center at 30-degree intervals.
2024-11-09 19:37:55,723 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:37:55,723 - INFO - [IRIS] - 
Generating instructions for: A series of twelve nested circles centered at (400,200), intersected by diagonal lines radiating from the center at 30-degree intervals.
2024-11-09 19:37:55,724 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:37:56,141 - INFO - [IRIS] - New connection: ws_20241109_193756_141915
2024-11-09 19:37:56,143 - INFO - [IRIS] - Connection ws_20241109_193756_141915 accepted
2024-11-09 19:37:56,144 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:37:57,268 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:37:57,271 - INFO - [IRIS] - Generated idea: Twelve concentric circles centered at (400,200) intersected by diagonal lines radiating from the same point at 30-degree intervals.
2024-11-09 19:37:57,273 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:37:57,273 - INFO - [IRIS] - 
Generating instructions for: Twelve concentric circles centered at (400,200) intersected by diagonal lines radiating from the same point at 30-degree intervals.
2024-11-09 19:37:57,274 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:37:59,444 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:37:59,446 - INFO - [IRIS] - Generated idea: A series of twelve concentric circles centered at (400,200), intersected by six evenly-spaced straight lines radiating from the same center point.
2024-11-09 19:37:59,447 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:37:59,447 - INFO - [IRIS] - 
Generating instructions for: A series of twelve concentric circles centered at (400,200), intersected by six evenly-spaced straight lines radiating from the same center point.
2024-11-09 19:37:59,449 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:38:00,512 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:38:00,514 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:38:00,515 - INFO - [IRIS] - Starting drawing: Concentric circles with radiating lines
2024-11-09 19:38:00,516 - ERROR - [IRIS] - Drawing Error: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 289, in execute_drawing
    await self.update_status(websocket, idea=idea, current_action="Starting new drawing")
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:38:00,521 - ERROR - [IRIS] - Loop Error: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 411, in run
    await self.execute_drawing(websocket, instructions, idea)
  File "C:\Users\ali45\asda\main.py", line 322, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:38:00,525 - ERROR - [IRIS] - Critical error in run loop: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 421, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:38:00,528 - ERROR - [IRIS] - Error in connection ws_20241109_193745_824877: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 673, in websocket_endpoint
    await manager.bot.run(websocket)
  File "C:\Users\ali45\asda\main.py", line 421, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:38:00,530 - INFO - [IRIS] - Connection ws_20241109_193745_824877 cleaned up
2024-11-09 19:38:13,348 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:38:13,350 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:38:13,351 - INFO - [IRIS] - Starting drawing: Twelve concentric circles with six radiating lines
2024-11-09 19:38:13,351 - ERROR - [IRIS] - Drawing Error: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 289, in execute_drawing
    await self.update_status(websocket, idea=idea, current_action="Starting new drawing")
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:38:13,354 - ERROR - [IRIS] - Loop Error: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 411, in run
    await self.execute_drawing(websocket, instructions, idea)
  File "C:\Users\ali45\asda\main.py", line 322, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:38:13,357 - ERROR - [IRIS] - Critical error in run loop: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 421, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:38:13,359 - ERROR - [IRIS] - Error in connection ws_20241109_193754_727269: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 673, in websocket_endpoint
    await manager.bot.run(websocket)
  File "C:\Users\ali45\asda\main.py", line 421, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:38:13,363 - INFO - [IRIS] - Connection ws_20241109_193754_727269 cleaned up
2024-11-09 19:38:14,505 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:38:14,506 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:38:14,507 - INFO - [IRIS] - Starting drawing: Twelve concentric circles with radiating lines at 30-degree intervals
2024-11-09 19:38:17,414 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:38:17,415 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:38:17,416 - INFO - [IRIS] - Starting drawing: Nested circles with radiating lines at 30-degree intervals
2024-11-09 19:38:21,495 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:38:22,547 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:38:22,548 - INFO - [IRIS] - Generated idea: Thirty concentric circles radiating outward from the center point (400,200), intersected by six straight lines emerging from the same point at 30-degree intervals.
2024-11-09 19:38:22,549 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:38:22,550 - INFO - [IRIS] - 
Generating instructions for: Thirty concentric circles radiating outward from the center point (400,200), intersected by six straight lines emerging from the same point at 30-degree intervals.
2024-11-09 19:38:22,550 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:38:24,723 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:38:25,851 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:38:25,853 - INFO - [IRIS] - Generated idea: A logarithmic spiral emerges from the center point (400,200), intersecting with six evenly-spaced concentric circles.
2024-11-09 19:38:25,854 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:38:25,855 - INFO - [IRIS] - 
Generating instructions for: A logarithmic spiral emerges from the center point (400,200), intersecting with six evenly-spaced concentric circles.
2024-11-09 19:38:25,855 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:38:36,396 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:38:36,398 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:38:36,398 - INFO - [IRIS] - Starting drawing: Thirty concentric circles with six intersecting lines
2024-11-09 19:38:36,399 - ERROR - [IRIS] - Drawing Error: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 289, in execute_drawing
    await self.update_status(websocket, idea=idea, current_action="Starting new drawing")
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:38:36,402 - ERROR - [IRIS] - Loop Error: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 411, in run
    await self.execute_drawing(websocket, instructions, idea)
  File "C:\Users\ali45\asda\main.py", line 322, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:38:36,405 - ERROR - [IRIS] - Critical error in run loop: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 421, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:38:36,408 - ERROR - [IRIS] - Error in connection ws_20241109_193756_141915: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 673, in websocket_endpoint
    await manager.bot.run(websocket)
  File "C:\Users\ali45\asda\main.py", line 421, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:38:36,411 - INFO - [IRIS] - Connection ws_20241109_193756_141915 cleaned up
2024-11-09 19:38:42,583 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:38:42,586 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:38:42,587 - INFO - [IRIS] - Starting drawing: Logarithmic spiral with concentric circles
2024-11-09 19:38:42,588 - ERROR - [IRIS] - Drawing Error: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 289, in execute_drawing
    await self.update_status(websocket, idea=idea, current_action="Starting new drawing")
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:38:42,590 - ERROR - [IRIS] - Loop Error: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 411, in run
    await self.execute_drawing(websocket, instructions, idea)
  File "C:\Users\ali45\asda\main.py", line 322, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:38:42,593 - ERROR - [IRIS] - Critical error in run loop: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 421, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:38:42,596 - ERROR - [IRIS] - Error in connection ws_20241109_193726_945832: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 673, in websocket_endpoint
    await manager.bot.run(websocket)
  File "C:\Users\ali45\asda\main.py", line 421, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:38:42,600 - INFO - [IRIS] - Connection ws_20241109_193726_945832 cleaned up
2024-11-09 19:39:23,492 - INFO - [IRIS] - New connection: ws_20241109_193923_492962
2024-11-09 19:39:23,493 - INFO - [IRIS] - Connection ws_20241109_193923_492962 accepted
2024-11-09 19:39:23,494 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:39:27,275 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:39:27,276 - INFO - [IRIS] - Generated idea: A series of nested circles radiating from the center point (400,200), intersected by diagonal lines that create a starburst effect.
2024-11-09 19:39:27,277 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:39:27,278 - INFO - [IRIS] - 
Generating instructions for: A series of nested circles radiating from the center point (400,200), intersected by diagonal lines that create a starburst effect.
2024-11-09 19:39:27,278 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:39:38,796 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:39:38,798 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:39:38,798 - INFO - [IRIS] - Starting drawing: Nested circles with radiating starburst lines
2024-11-09 19:39:45,460 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:39:46,405 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:39:46,406 - INFO - [IRIS] - Generated idea: Twelve concentric circles radiate from the center point (400,200), intersected by diagonal lines at 45-degree angles.
2024-11-09 19:39:46,407 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:39:46,407 - INFO - [IRIS] - 
Generating instructions for: Twelve concentric circles radiate from the center point (400,200), intersected by diagonal lines at 45-degree angles.
2024-11-09 19:39:46,408 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:39:58,826 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:39:58,828 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:39:58,828 - INFO - [IRIS] - Starting drawing: Twelve concentric circles with diagonal intersecting lines
2024-11-09 19:40:05,195 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:40:09,348 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:40:09,350 - INFO - [IRIS] - Generated idea: Twelve concentric circles centered at (400,200) intersected by three diagonal lines radiating from the same center point.
2024-11-09 19:40:09,350 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:40:09,351 - INFO - [IRIS] - 
Generating instructions for: Twelve concentric circles centered at (400,200) intersected by three diagonal lines radiating from the same center point.
2024-11-09 19:40:09,351 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:40:30,811 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:40:30,813 - ERROR - [IRIS] - Error in attempt 1: Validation failed: Element 9, point 0 coordinates out of bounds
2024-11-09 19:40:31,825 - INFO - [IRIS] - 
Generating instructions for: Twelve concentric circles centered at (400,200) intersected by three diagonal lines radiating from the same center point.
2024-11-09 19:40:31,826 - INFO - [IRIS] - Attempt 2/3
2024-11-09 19:40:53,795 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:40:53,798 - ERROR - [IRIS] - Error in attempt 2: Validation failed: Element 9, point 0 coordinates out of bounds
2024-11-09 19:40:54,811 - INFO - [IRIS] - 
Generating instructions for: Twelve concentric circles centered at (400,200) intersected by three diagonal lines radiating from the same center point.
2024-11-09 19:40:54,812 - INFO - [IRIS] - Attempt 3/3
2024-11-09 19:40:57,121 - INFO - [IRIS] - New connection: ws_20241109_194057_121516
2024-11-09 19:40:57,122 - INFO - [IRIS] - Connection ws_20241109_194057_121516 accepted
2024-11-09 19:40:57,123 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:41:02,170 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:41:02,172 - INFO - [IRIS] - Generated idea: A series of concentric circles intersected by diagonal lines radiating from the center point (400,200).
2024-11-09 19:41:02,172 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:41:02,173 - INFO - [IRIS] - 
Generating instructions for: A series of concentric circles intersected by diagonal lines radiating from the center point (400,200).
2024-11-09 19:41:02,173 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:41:15,134 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:41:15,137 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:41:15,138 - INFO - [IRIS] - Starting drawing: Concentric circles with radiating lines
2024-11-09 19:41:16,886 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:41:16,889 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:41:16,889 - INFO - [IRIS] - Starting drawing: Twelve concentric circles with three radiating lines
2024-11-09 19:41:16,890 - ERROR - [IRIS] - Drawing Error: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 289, in execute_drawing
    await self.update_status(websocket, idea=idea, current_action="Starting new drawing")
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:41:16,894 - ERROR - [IRIS] - Loop Error: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 411, in run
    await self.execute_drawing(websocket, instructions, idea)
  File "C:\Users\ali45\asda\main.py", line 322, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:41:16,896 - ERROR - [IRIS] - Critical error in run loop: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 421, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:41:16,898 - ERROR - [IRIS] - Error in connection ws_20241109_193923_492962: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 673, in websocket_endpoint
    await manager.bot.run(websocket)
  File "C:\Users\ali45\asda\main.py", line 421, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:41:16,900 - INFO - [IRIS] - Connection ws_20241109_193923_492962 cleaned up
2024-11-09 19:41:21,509 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:41:22,420 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:41:22,422 - INFO - [IRIS] - Generated idea: A series of 12 concentric circles centered at (400,200) intersected by diagonal lines radiating from the same center point at 30-degree intervals.
2024-11-09 19:41:22,423 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:41:22,423 - INFO - [IRIS] - 
Generating instructions for: A series of 12 concentric circles centered at (400,200) intersected by diagonal lines radiating from the same center point at 30-degree intervals.
2024-11-09 19:41:22,424 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:41:29,200 - INFO - [IRIS] - Connection ws_20241109_194057_121516 cleaned up
2024-11-09 19:41:44,696 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:41:53,992 - INFO - [IRIS] - New connection: ws_20241109_194153_992602
2024-11-09 19:41:53,994 - INFO - [IRIS] - Connection ws_20241109_194153_992602 accepted
2024-11-09 19:41:53,994 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:41:58,649 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:41:58,654 - INFO - [IRIS] - Generated idea: A series of 12 concentric circles centered at (400,200) intersected by straight lines radiating from the same point at 30-degree intervals.
2024-11-09 19:41:58,654 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:41:58,654 - INFO - [IRIS] - 
Generating instructions for: A series of 12 concentric circles centered at (400,200) intersected by straight lines radiating from the same point at 30-degree intervals.
2024-11-09 19:41:58,655 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:42:08,837 - INFO - [IRIS] - New connection: ws_20241109_194208_836520
2024-11-09 19:42:08,837 - INFO - [IRIS] - Connection ws_20241109_194208_836520 accepted
2024-11-09 19:42:08,838 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:42:09,858 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:42:09,859 - INFO - [IRIS] - Generated idea: A series of 12 concentric circles centered at (400,200) intersected by diagonal lines radiating from the same center point at 30-degree intervals.
2024-11-09 19:42:09,861 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:42:09,861 - INFO - [IRIS] - 
Generating instructions for: A series of 12 concentric circles centered at (400,200) intersected by diagonal lines radiating from the same center point at 30-degree intervals.
2024-11-09 19:42:09,861 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:42:11,263 - INFO - [IRIS] - New connection: ws_20241109_194211_263451
2024-11-09 19:42:11,264 - INFO - [IRIS] - Connection ws_20241109_194211_263451 accepted
2024-11-09 19:42:11,264 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:42:13,214 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:42:13,216 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:42:13,216 - INFO - [IRIS] - Starting drawing: 12 concentric circles with radiating lines at 30-degree intervals
2024-11-09 19:42:14,877 - INFO - [IRIS] - New connection: ws_20241109_194214_877860
2024-11-09 19:42:14,878 - INFO - [IRIS] - Connection ws_20241109_194214_877860 accepted
2024-11-09 19:42:14,879 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:42:14,879 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:42:14,883 - INFO - [IRIS] - Generated idea: A series of twelve concentric circles centered at (400,200) intersected by six evenly-spaced straight lines radiating from the same center point.
2024-11-09 19:42:14,884 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:42:14,885 - INFO - [IRIS] - 
Generating instructions for: A series of twelve concentric circles centered at (400,200) intersected by six evenly-spaced straight lines radiating from the same center point.
2024-11-09 19:42:14,885 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:42:15,706 - INFO - [IRIS] - New connection: ws_20241109_194215_706956
2024-11-09 19:42:15,707 - INFO - [IRIS] - Connection ws_20241109_194215_706956 accepted
2024-11-09 19:42:15,708 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:42:16,244 - INFO - [IRIS] - New connection: ws_20241109_194216_244992
2024-11-09 19:42:16,247 - INFO - [IRIS] - Connection ws_20241109_194216_244992 accepted
2024-11-09 19:42:16,247 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:42:17,317 - INFO - [IRIS] - New connection: ws_20241109_194217_317731
2024-11-09 19:42:17,318 - INFO - [IRIS] - Connection ws_20241109_194217_317731 accepted
2024-11-09 19:42:17,319 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:42:18,486 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:42:18,488 - INFO - [IRIS] - Generated idea: A series of concentric circles radiating outward from (400,200) intersected by diagonal lines at 45-degree angles.
2024-11-09 19:42:18,489 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:42:18,489 - INFO - [IRIS] - 
Generating instructions for: A series of concentric circles radiating outward from (400,200) intersected by diagonal lines at 45-degree angles.
2024-11-09 19:42:18,490 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:42:19,174 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:42:19,176 - INFO - [IRIS] - Generated idea: A series of concentric circles radiating from the center point (400,200), intersected by straight diagonal lines that form a star pattern.
2024-11-09 19:42:19,177 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:42:19,177 - INFO - [IRIS] - 
Generating instructions for: A series of concentric circles radiating from the center point (400,200), intersected by straight diagonal lines that form a star pattern.
2024-11-09 19:42:19,178 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:42:19,943 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:42:20,554 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:42:20,556 - INFO - [IRIS] - Generated idea: A series of concentric circles intersected by diagonal lines radiating from the center point (400,200) at 30-degree intervals.
2024-11-09 19:42:20,557 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:42:20,557 - INFO - [IRIS] - 
Generating instructions for: A series of concentric circles intersected by diagonal lines radiating from the center point (400,200) at 30-degree intervals.
2024-11-09 19:42:20,558 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:42:22,221 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:42:22,223 - INFO - [IRIS] - Generated idea: A series of twelve concentric circles centered at (400,200) intersected by six straight lines radiating from the same center point.
2024-11-09 19:42:22,224 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:42:22,224 - INFO - [IRIS] - 
Generating instructions for: A series of twelve concentric circles centered at (400,200) intersected by six straight lines radiating from the same center point.
2024-11-09 19:42:22,225 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:42:25,910 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:42:25,912 - INFO - [IRIS] - Generated idea: A series of concentric circles intersected by diagonal lines emanating from the center point at 400,200.
2024-11-09 19:42:25,913 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:42:25,913 - INFO - [IRIS] - 
Generating instructions for: A series of concentric circles intersected by diagonal lines emanating from the center point at 400,200.
2024-11-09 19:42:25,913 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:42:27,244 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:42:27,246 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:42:27,247 - INFO - [IRIS] - Starting drawing: Concentric circles with intersecting diagonal lines
2024-11-09 19:42:27,248 - ERROR - [IRIS] - Drawing Error: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 289, in execute_drawing
    await self.update_status(websocket, idea=idea, current_action="Starting new drawing")
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:42:27,254 - ERROR - [IRIS] - Loop Error: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 411, in run
    await self.execute_drawing(websocket, instructions, idea)
  File "C:\Users\ali45\asda\main.py", line 322, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:42:27,258 - ERROR - [IRIS] - Critical error in run loop: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 421, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:42:27,260 - ERROR - [IRIS] - Error in connection ws_20241109_194214_877860: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 673, in websocket_endpoint
    await manager.bot.run(websocket)
  File "C:\Users\ali45\asda\main.py", line 421, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:42:27,262 - INFO - [IRIS] - Connection ws_20241109_194214_877860 cleaned up
2024-11-09 19:42:27,948 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:42:27,950 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:42:27,951 - INFO - [IRIS] - Starting drawing: 12 concentric circles with radiating lines at 30-degree intervals
2024-11-09 19:42:27,952 - ERROR - [IRIS] - Drawing Error: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 289, in execute_drawing
    await self.update_status(websocket, idea=idea, current_action="Starting new drawing")
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:42:27,956 - ERROR - [IRIS] - Loop Error: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 411, in run
    await self.execute_drawing(websocket, instructions, idea)
  File "C:\Users\ali45\asda\main.py", line 322, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:42:27,959 - ERROR - [IRIS] - Critical error in run loop: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 421, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:42:27,960 - ERROR - [IRIS] - Error in connection ws_20241109_194208_836520: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 673, in websocket_endpoint
    await manager.bot.run(websocket)
  File "C:\Users\ali45\asda\main.py", line 421, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:42:27,962 - INFO - [IRIS] - Connection ws_20241109_194208_836520 cleaned up
2024-11-09 19:42:29,297 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:42:29,298 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:42:29,299 - INFO - [IRIS] - Starting drawing: Concentric circles with intersecting star pattern
2024-11-09 19:42:29,299 - ERROR - [IRIS] - Drawing Error: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 289, in execute_drawing
    await self.update_status(websocket, idea=idea, current_action="Starting new drawing")
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:42:29,301 - ERROR - [IRIS] - Loop Error: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 411, in run
    await self.execute_drawing(websocket, instructions, idea)
  File "C:\Users\ali45\asda\main.py", line 322, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:42:29,304 - ERROR - [IRIS] - Critical error in run loop: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 421, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:42:29,307 - ERROR - [IRIS] - Error in connection ws_20241109_194215_706956: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 673, in websocket_endpoint
    await manager.bot.run(websocket)
  File "C:\Users\ali45\asda\main.py", line 421, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:42:29,309 - INFO - [IRIS] - Connection ws_20241109_194215_706956 cleaned up
2024-11-09 19:42:29,437 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:42:29,439 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:42:29,440 - INFO - [IRIS] - Starting drawing: Twelve concentric circles with six radiating lines
2024-11-09 19:42:29,440 - ERROR - [IRIS] - Drawing Error: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 289, in execute_drawing
    await self.update_status(websocket, idea=idea, current_action="Starting new drawing")
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:42:29,444 - ERROR - [IRIS] - Loop Error: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 411, in run
    await self.execute_drawing(websocket, instructions, idea)
  File "C:\Users\ali45\asda\main.py", line 322, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:42:29,447 - ERROR - [IRIS] - Critical error in run loop: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 421, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:42:29,449 - ERROR - [IRIS] - Error in connection ws_20241109_194211_263451: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 673, in websocket_endpoint
    await manager.bot.run(websocket)
  File "C:\Users\ali45\asda\main.py", line 421, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:42:29,452 - INFO - [IRIS] - Connection ws_20241109_194211_263451 cleaned up
2024-11-09 19:42:35,745 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:42:35,747 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:42:35,747 - INFO - [IRIS] - Starting drawing: Concentric circles with radiating lines at 30-degree intervals
2024-11-09 19:42:35,748 - ERROR - [IRIS] - Drawing Error: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 289, in execute_drawing
    await self.update_status(websocket, idea=idea, current_action="Starting new drawing")
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:42:35,751 - ERROR - [IRIS] - Loop Error: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 411, in run
    await self.execute_drawing(websocket, instructions, idea)
  File "C:\Users\ali45\asda\main.py", line 322, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:42:35,756 - ERROR - [IRIS] - Critical error in run loop: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 421, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:42:35,758 - ERROR - [IRIS] - Error in connection ws_20241109_194216_244992: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 673, in websocket_endpoint
    await manager.bot.run(websocket)
  File "C:\Users\ali45\asda\main.py", line 421, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 445, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:42:35,761 - INFO - [IRIS] - Connection ws_20241109_194216_244992 cleaned up
2024-11-09 19:42:35,905 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:42:35,906 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:42:35,907 - INFO - [IRIS] - Starting drawing: Concentric circles with intersecting diagonal lines
2024-11-09 19:42:36,103 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:42:36,105 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:42:36,106 - INFO - [IRIS] - Starting drawing: Twelve concentric circles with six radiating lines from center
2024-11-09 19:42:42,109 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:42:42,575 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:42:43,382 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:42:43,384 - INFO - [IRIS] - Generated idea: A series of twelve concentric circles centered at (400,200) intersected by diagonal lines radiating from the same center point every 30 degrees.
2024-11-09 19:42:43,385 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:42:43,385 - INFO - [IRIS] - 
Generating instructions for: A series of twelve concentric circles centered at (400,200) intersected by diagonal lines radiating from the same center point every 30 degrees.
2024-11-09 19:42:43,386 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:42:49,249 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:42:49,251 - INFO - [IRIS] - Generated idea: Twelve concentric circles radiate from the center point (400,200), intersected by six evenly-spaced straight lines that extend to the canvas edges.
2024-11-09 19:42:49,252 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:42:49,252 - INFO - [IRIS] - 
Generating instructions for: Twelve concentric circles radiate from the center point (400,200), intersected by six evenly-spaced straight lines that extend to the canvas edges.
2024-11-09 19:42:49,253 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:43:01,501 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:43:01,504 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:43:01,504 - INFO - [IRIS] - Starting drawing: Twelve concentric circles with radiating lines every 30 degrees
2024-11-09 19:43:05,270 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:43:05,272 - ERROR - [IRIS] - Error in attempt 1: Expecting ',' delimiter: line 8 column 29 (char 239)
2024-11-09 19:43:06,277 - INFO - [IRIS] - 
Generating instructions for: Twelve concentric circles radiate from the center point (400,200), intersected by six evenly-spaced straight lines that extend to the canvas edges.
2024-11-09 19:43:06,278 - INFO - [IRIS] - Attempt 2/3
2024-11-09 19:43:08,578 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:43:12,251 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:43:12,253 - INFO - [IRIS] - Generated idea: A series of concentric circles rippling outward from the center point (400,200), intersected by straight diagonal lines radiating from the same origin.
2024-11-09 19:43:12,255 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:43:12,255 - INFO - [IRIS] - 
Generating instructions for: A series of concentric circles rippling outward from the center point (400,200), intersected by straight diagonal lines radiating from the same origin.
2024-11-09 19:43:12,256 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:43:21,961 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:43:21,964 - ERROR - [IRIS] - Error in attempt 1: Expecting ',' delimiter: line 8 column 29 (char 239)
2024-11-09 19:43:22,990 - INFO - [IRIS] - 
Generating instructions for: Twelve concentric circles radiate from the center point (400,200), intersected by six evenly-spaced straight lines that extend to the canvas edges.
2024-11-09 19:43:22,991 - INFO - [IRIS] - Attempt 2/3
2024-11-09 19:43:23,542 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:43:23,544 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:43:23,545 - INFO - [IRIS] - Starting drawing: Concentric circles with radiating diagonal lines
2024-11-09 19:43:29,543 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:43:35,153 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:43:35,155 - INFO - [IRIS] - Generated idea: A large circle at the center (400,200) with 12 evenly-spaced straight lines radiating outward like sunbeams, each line extending to the canvas edges.
2024-11-09 19:43:35,156 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:43:35,157 - INFO - [IRIS] - 
Generating instructions for: A large circle at the center (400,200) with 12 evenly-spaced straight lines radiating outward like sunbeams, each line extending to the canvas edges.
2024-11-09 19:43:35,157 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:43:41,191 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:43:41,192 - ERROR - [IRIS] - Error in attempt 1: Expecting ',' delimiter: line 8 column 29 (char 239)
2024-11-09 19:43:42,203 - INFO - [IRIS] - 
Generating instructions for: Twelve concentric circles radiate from the center point (400,200), intersected by six evenly-spaced straight lines that extend to the canvas edges.
2024-11-09 19:43:42,204 - INFO - [IRIS] - Attempt 2/3
2024-11-09 19:43:56,260 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:43:56,262 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:43:56,262 - INFO - [IRIS] - Starting drawing: Large circle with 12 radiating sunbeams
2024-11-09 19:43:59,676 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:43:59,678 - ERROR - [IRIS] - Error in attempt 2: Expecting ',' delimiter: line 8 column 29 (char 239)
2024-11-09 19:44:00,672 - INFO - [IRIS] - 
Generating instructions for: Twelve concentric circles radiate from the center point (400,200), intersected by six evenly-spaced straight lines that extend to the canvas edges.
2024-11-09 19:44:00,672 - INFO - [IRIS] - Attempt 3/3
2024-11-09 19:44:03,426 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:44:09,001 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:44:09,004 - INFO - [IRIS] - Generated idea: A series of 12 concentric circles centered at (400,200) intersected by diagonal lines radiating from the same center point.
2024-11-09 19:44:09,005 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:44:09,006 - INFO - [IRIS] - 
Generating instructions for: A series of 12 concentric circles centered at (400,200) intersected by diagonal lines radiating from the same center point.
2024-11-09 19:44:09,006 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:44:12,117 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:44:12,120 - ERROR - [IRIS] - Error in attempt 1: Expecting ',' delimiter: line 8 column 29 (char 232)
2024-11-09 19:44:13,123 - INFO - [IRIS] - 
Generating instructions for: Twelve concentric circles radiate from the center point (400,200), intersected by six evenly-spaced straight lines that extend to the canvas edges.
2024-11-09 19:44:13,124 - INFO - [IRIS] - Attempt 2/3
2024-11-09 19:44:20,157 - INFO - [IRIS] - Connection ws_20241109_194217_317731 cleaned up
2024-11-09 19:44:20,163 - INFO - [IRIS] - Connection ws_20241109_194153_992602 cleaned up
2024-11-09 19:44:20,423 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:44:31,004 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:44:37,463 - INFO - [IRIS] - New connection: ws_20241109_194437_463413
2024-11-09 19:44:37,464 - INFO - [IRIS] - Connection ws_20241109_194437_463413 accepted
2024-11-09 19:44:37,465 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:44:42,413 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:44:42,416 - INFO - [IRIS] - Generated idea: Twelve concentric circles radiate from the center point (400,200), intersected by six straight lines that rotate at 30-degree intervals.
2024-11-09 19:44:42,417 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:44:42,418 - INFO - [IRIS] - 
Generating instructions for: Twelve concentric circles radiate from the center point (400,200), intersected by six straight lines that rotate at 30-degree intervals.
2024-11-09 19:44:42,419 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:44:42,420 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:44:42,421 - INFO - [IRIS] - Starting drawing: Twelve concentric circles radiate from the center point (400,200), intersected by six straight lines that rotate at 30-degree intervals.
2024-11-09 19:44:45,243 - INFO - [IRIS] - New connection: ws_20241109_194445_243157
2024-11-09 19:44:45,244 - INFO - [IRIS] - Connection ws_20241109_194445_243157 accepted
2024-11-09 19:44:45,245 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:44:47,587 - INFO - [IRIS] - New connection: ws_20241109_194447_587137
2024-11-09 19:44:47,588 - INFO - [IRIS] - Connection ws_20241109_194447_587137 accepted
2024-11-09 19:44:47,589 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:44:48,573 - INFO - [IRIS] - New connection: ws_20241109_194448_571911
2024-11-09 19:44:48,573 - INFO - [IRIS] - Connection ws_20241109_194448_571911 accepted
2024-11-09 19:44:48,573 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:44:49,508 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:44:49,510 - INFO - [IRIS] - Generated idea: A series of twelve concentric circles centered at (400,200) intersected by six evenly-spaced straight lines radiating from the same center point.
2024-11-09 19:44:49,510 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:44:49,510 - INFO - [IRIS] - 
Generating instructions for: A series of twelve concentric circles centered at (400,200) intersected by six evenly-spaced straight lines radiating from the same center point.
2024-11-09 19:44:49,512 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:44:49,512 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:44:49,512 - INFO - [IRIS] - Starting drawing: A series of twelve concentric circles centered at (400,200) intersected by six evenly-spaced straight lines radiating from the same center point.
2024-11-09 19:44:50,402 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:44:50,405 - INFO - [IRIS] - Generated idea: A series of twelve concentric circles centered at (400,200) intersected by six evenly-spaced straight lines radiating from the same center point.
2024-11-09 19:44:50,406 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:44:50,407 - INFO - [IRIS] - 
Generating instructions for: A series of twelve concentric circles centered at (400,200) intersected by six evenly-spaced straight lines radiating from the same center point.
2024-11-09 19:44:50,407 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:44:50,408 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:44:50,408 - INFO - [IRIS] - Starting drawing: A series of twelve concentric circles centered at (400,200) intersected by six evenly-spaced straight lines radiating from the same center point.
2024-11-09 19:44:50,409 - ERROR - [IRIS] - Drawing Error: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 275, in execute_drawing
    await self.update_status(websocket, idea=idea, current_action="Starting new drawing")
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:44:50,413 - ERROR - [IRIS] - Loop Error: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 397, in run
    await self.execute_drawing(websocket, instructions, idea)
  File "C:\Users\ali45\asda\main.py", line 308, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:44:50,417 - ERROR - [IRIS] - Critical error in run loop: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 407, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:44:50,420 - ERROR - [IRIS] - Error in connection ws_20241109_194445_243157: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 648, in websocket_endpoint
    await manager.bot.run(websocket)
  File "C:\Users\ali45\asda\main.py", line 407, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:44:50,424 - INFO - [IRIS] - Connection ws_20241109_194445_243157 cleaned up
2024-11-09 19:44:54,548 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:44:54,550 - INFO - [IRIS] - Generated idea: A series of concentric circles intersected by diagonal lines radiating from the center point (400,200) at 30-degree intervals.
2024-11-09 19:44:54,550 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:44:54,551 - INFO - [IRIS] - 
Generating instructions for: A series of concentric circles intersected by diagonal lines radiating from the center point (400,200) at 30-degree intervals.
2024-11-09 19:44:54,551 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:44:54,552 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:44:54,552 - INFO - [IRIS] - Starting drawing: A series of concentric circles intersected by diagonal lines radiating from the center point (400,200) at 30-degree intervals.
2024-11-09 19:44:54,553 - ERROR - [IRIS] - Drawing Error: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 275, in execute_drawing
    await self.update_status(websocket, idea=idea, current_action="Starting new drawing")
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:44:54,556 - ERROR - [IRIS] - Loop Error: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 397, in run
    await self.execute_drawing(websocket, instructions, idea)
  File "C:\Users\ali45\asda\main.py", line 308, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:44:54,559 - ERROR - [IRIS] - Critical error in run loop: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 407, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:44:54,563 - ERROR - [IRIS] - Error in connection ws_20241109_194447_587137: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 648, in websocket_endpoint
    await manager.bot.run(websocket)
  File "C:\Users\ali45\asda\main.py", line 407, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:44:54,566 - INFO - [IRIS] - Connection ws_20241109_194447_587137 cleaned up
2024-11-09 19:45:02,259 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:45:07,720 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:45:07,722 - INFO - [IRIS] - Generated idea: A series of concentric circles radiating outward from the center point (400,200), intersected by diagonal lines that create a starburst effect.
2024-11-09 19:45:07,722 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:45:07,723 - INFO - [IRIS] - 
Generating instructions for: A series of concentric circles radiating outward from the center point (400,200), intersected by diagonal lines that create a starburst effect.
2024-11-09 19:45:07,724 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:45:07,725 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:45:07,725 - INFO - [IRIS] - Starting drawing: A series of concentric circles radiating outward from the center point (400,200), intersected by diagonal lines that create a starburst effect.
2024-11-09 19:45:09,553 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:45:15,020 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:45:15,023 - INFO - [IRIS] - Generated idea: A series of 12 concentric circles centered at (400,200) intersected by straight lines radiating from the same center point at 30-degree intervals.
2024-11-09 19:45:15,023 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:45:15,023 - INFO - [IRIS] - 
Generating instructions for: A series of 12 concentric circles centered at (400,200) intersected by straight lines radiating from the same center point at 30-degree intervals.
2024-11-09 19:45:15,024 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:45:15,024 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:45:15,025 - INFO - [IRIS] - Starting drawing: A series of 12 concentric circles centered at (400,200) intersected by straight lines radiating from the same center point at 30-degree intervals.
2024-11-09 19:45:27,748 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:45:28,717 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:45:28,719 - INFO - [IRIS] - Generated idea: A series of 12 concentric circles centered at (400,200) intersected by 6 equally-spaced straight lines radiating from the same center point.
2024-11-09 19:45:28,720 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:45:28,720 - INFO - [IRIS] - 
Generating instructions for: A series of 12 concentric circles centered at (400,200) intersected by 6 equally-spaced straight lines radiating from the same center point.
2024-11-09 19:45:28,721 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:45:28,722 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:45:28,722 - INFO - [IRIS] - Starting drawing: A series of 12 concentric circles centered at (400,200) intersected by 6 equally-spaced straight lines radiating from the same center point.
2024-11-09 19:45:34,949 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:45:37,851 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:45:37,854 - INFO - [IRIS] - Generated idea: A series of 12 concentric circles centered at (400,200) intersected by 6 evenly-spaced straight lines radiating from the same center point.
2024-11-09 19:45:37,854 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:45:37,854 - INFO - [IRIS] - 
Generating instructions for: A series of 12 concentric circles centered at (400,200) intersected by 6 evenly-spaced straight lines radiating from the same center point.
2024-11-09 19:45:37,855 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:45:37,855 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:45:37,855 - INFO - [IRIS] - Starting drawing: A series of 12 concentric circles centered at (400,200) intersected by 6 evenly-spaced straight lines radiating from the same center point.
2024-11-09 19:45:48,741 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:45:49,761 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:45:49,762 - INFO - [IRIS] - Generated idea: A series of 12 concentric circles centered at (400,200) intersected by diagonal lines radiating from the same center point at 30-degree intervals.
2024-11-09 19:45:49,763 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:45:49,763 - INFO - [IRIS] - 
Generating instructions for: A series of 12 concentric circles centered at (400,200) intersected by diagonal lines radiating from the same center point at 30-degree intervals.
2024-11-09 19:45:49,763 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:45:49,764 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:45:49,764 - INFO - [IRIS] - Starting drawing: A series of 12 concentric circles centered at (400,200) intersected by diagonal lines radiating from the same center point at 30-degree intervals.
2024-11-09 19:45:57,786 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:46:04,456 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:46:04,457 - INFO - [IRIS] - Generated idea: A series of twelve concentric circles radiating from the center point (400,200), intersected by six evenly-spaced straight lines extending from the same center.
2024-11-09 19:46:04,457 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:46:04,459 - INFO - [IRIS] - 
Generating instructions for: A series of twelve concentric circles radiating from the center point (400,200), intersected by six evenly-spaced straight lines extending from the same center.
2024-11-09 19:46:04,459 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:46:04,460 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:46:04,461 - INFO - [IRIS] - Starting drawing: A series of twelve concentric circles radiating from the center point (400,200), intersected by six evenly-spaced straight lines extending from the same center.
2024-11-09 19:46:09,828 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:46:14,761 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:46:14,762 - INFO - [IRIS] - Generated idea: A logarithmic spiral emanates from the center point (400,200), intersected by concentric circles at regular intervals.
2024-11-09 19:46:14,763 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:46:14,763 - INFO - [IRIS] - 
Generating instructions for: A logarithmic spiral emanates from the center point (400,200), intersected by concentric circles at regular intervals.
2024-11-09 19:46:14,764 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:46:14,764 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:46:14,765 - INFO - [IRIS] - Starting drawing: A logarithmic spiral emanates from the center point (400,200), intersected by concentric circles at regular intervals.
2024-11-09 19:46:24,419 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:46:25,536 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:46:25,539 - INFO - [IRIS] - Generated idea: A series of 12 concentric circles centered at (400,200) intersected by diagonal lines radiating from the same center point at 30-degree intervals.
2024-11-09 19:46:25,539 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:46:25,540 - INFO - [IRIS] - 
Generating instructions for: A series of 12 concentric circles centered at (400,200) intersected by diagonal lines radiating from the same center point at 30-degree intervals.
2024-11-09 19:46:25,541 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:46:25,542 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:46:25,542 - INFO - [IRIS] - Starting drawing: A series of 12 concentric circles centered at (400,200) intersected by diagonal lines radiating from the same center point at 30-degree intervals.
2024-11-09 19:46:32,223 - ERROR - [IRIS] - Drawing Error: sent 1012 (service restart); no close frame received
Traceback (most recent call last):
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1279, in close_connection
    await self.transfer_data_task
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 945, in transfer_data
    message = await self.read_message()
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1015, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1090, in read_data_frame
    frame = await self.read_frame(max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1147, in read_frame
    frame = await Frame.read(
            ^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\framing.py", line 71, in read
    data = await reader(2)
           ^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\asyncio\streams.py", line 729, in readexactly
    await self._wait_for_data('readexactly')
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\asyncio\streams.py", line 522, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 299, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: sent 1012 (service restart); no close frame received
2024-11-09 19:46:32,229 - ERROR - [IRIS] - Loop Error: sent 1012 (service restart); no close frame received
Traceback (most recent call last):
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1279, in close_connection
    await self.transfer_data_task
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 945, in transfer_data
    message = await self.read_message()
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1015, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1090, in read_data_frame
    frame = await self.read_frame(max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1147, in read_frame
    frame = await Frame.read(
            ^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\framing.py", line 71, in read
    data = await reader(2)
           ^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\asyncio\streams.py", line 729, in readexactly
    await self._wait_for_data('readexactly')
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\asyncio\streams.py", line 522, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 397, in run
    await self.execute_drawing(websocket, instructions, idea)
  File "C:\Users\ali45\asda\main.py", line 308, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: sent 1012 (service restart); no close frame received
2024-11-09 19:46:32,233 - ERROR - [IRIS] - Critical error in run loop: sent 1012 (service restart); no close frame received
Traceback (most recent call last):
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1279, in close_connection
    await self.transfer_data_task
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 945, in transfer_data
    message = await self.read_message()
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1015, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1090, in read_data_frame
    frame = await self.read_frame(max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1147, in read_frame
    frame = await Frame.read(
            ^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\framing.py", line 71, in read
    data = await reader(2)
           ^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\asyncio\streams.py", line 729, in readexactly
    await self._wait_for_data('readexactly')
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\asyncio\streams.py", line 522, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 407, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: sent 1012 (service restart); no close frame received
2024-11-09 19:46:32,238 - ERROR - [IRIS] - Error in connection ws_20241109_194448_571911: sent 1012 (service restart); no close frame received
Traceback (most recent call last):
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1279, in close_connection
    await self.transfer_data_task
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 945, in transfer_data
    message = await self.read_message()
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1015, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1090, in read_data_frame
    frame = await self.read_frame(max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1147, in read_frame
    frame = await Frame.read(
            ^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\framing.py", line 71, in read
    data = await reader(2)
           ^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\asyncio\streams.py", line 729, in readexactly
    await self._wait_for_data('readexactly')
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\asyncio\streams.py", line 522, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 648, in websocket_endpoint
    await manager.bot.run(websocket)
  File "C:\Users\ali45\asda\main.py", line 407, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: sent 1012 (service restart); no close frame received
2024-11-09 19:46:32,243 - INFO - [IRIS] - Connection ws_20241109_194448_571911 cleaned up
2024-11-09 19:46:33,065 - INFO - [IRIS] - Connection ws_20241109_194437_463413 cleaned up
2024-11-09 19:46:47,365 - INFO - [IRIS] - New connection: ws_20241109_194647_365246
2024-11-09 19:46:47,366 - INFO - [IRIS] - Connection ws_20241109_194647_365246 accepted
2024-11-09 19:46:47,367 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:46:47,396 - INFO - [IRIS] - New connection: ws_20241109_194647_396682
2024-11-09 19:46:47,397 - INFO - [IRIS] - Connection ws_20241109_194647_396682 accepted
2024-11-09 19:46:47,397 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:46:48,964 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:46:48,968 - INFO - [IRIS] - Generated idea: A central circle radiates twelve equally-spaced straight lines that transform into gentle waves at their midpoints.
2024-11-09 19:46:48,970 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:46:48,971 - INFO - [IRIS] - 
Generating instructions for: A central circle radiates twelve equally-spaced straight lines that transform into gentle waves at their midpoints.
2024-11-09 19:46:48,971 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:46:48,972 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:46:48,973 - INFO - [IRIS] - Starting drawing: A central circle radiates twelve equally-spaced straight lines that transform into gentle waves at their midpoints.
2024-11-09 19:46:51,637 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:46:51,639 - INFO - [IRIS] - Generated idea: A series of concentric circles rippling outward from the center point (400,200), intersected by diagonal lines radiating from the same origin.
2024-11-09 19:46:51,639 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:46:51,640 - INFO - [IRIS] - 
Generating instructions for: A series of concentric circles rippling outward from the center point (400,200), intersected by diagonal lines radiating from the same origin.
2024-11-09 19:46:51,640 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:46:51,640 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:46:51,642 - INFO - [IRIS] - Starting drawing: A series of concentric circles rippling outward from the center point (400,200), intersected by diagonal lines radiating from the same origin.
2024-11-09 19:47:13,939 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:47:16,774 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:47:18,455 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:47:18,457 - INFO - [IRIS] - Generated idea: A series of concentric circles intersected by diagonal lines radiating from the center at 30-degree intervals.
2024-11-09 19:47:18,457 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:47:18,458 - INFO - [IRIS] - 
Generating instructions for: A series of concentric circles intersected by diagonal lines radiating from the center at 30-degree intervals.
2024-11-09 19:47:18,458 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:47:18,459 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:47:18,460 - INFO - [IRIS] - Starting drawing: A series of concentric circles intersected by diagonal lines radiating from the center at 30-degree intervals.
2024-11-09 19:47:22,306 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:47:22,308 - INFO - [IRIS] - Generated idea: A series of twelve concentric circles radiating from the center point (400,200), intersected by straight lines extending from each compass point.
2024-11-09 19:47:22,309 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:47:22,309 - INFO - [IRIS] - 
Generating instructions for: A series of twelve concentric circles radiating from the center point (400,200), intersected by straight lines extending from each compass point.
2024-11-09 19:47:22,310 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:47:22,311 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:47:22,311 - INFO - [IRIS] - Starting drawing: A series of twelve concentric circles radiating from the center point (400,200), intersected by straight lines extending from each compass point.
2024-11-09 19:47:43,328 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:47:44,788 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:47:44,789 - INFO - [IRIS] - Generated idea: A series of twelve concentric circles radiating outward from the center point (400,200), intersected by six evenly-spaced straight lines extending from the same center.
2024-11-09 19:47:44,790 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:47:44,790 - INFO - [IRIS] - 
Generating instructions for: A series of twelve concentric circles radiating outward from the center point (400,200), intersected by six evenly-spaced straight lines extending from the same center.
2024-11-09 19:47:44,791 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:47:44,791 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:47:44,792 - INFO - [IRIS] - Starting drawing: A series of twelve concentric circles radiating outward from the center point (400,200), intersected by six evenly-spaced straight lines extending from the same center.
2024-11-09 19:47:47,322 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:47:51,835 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:47:51,837 - INFO - [IRIS] - Generated idea: A series of twelve concentric circles centered at (400,200), intersected by six evenly-spaced straight lines radiating from the center.
2024-11-09 19:47:51,838 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:47:51,839 - INFO - [IRIS] - 
Generating instructions for: A series of twelve concentric circles centered at (400,200), intersected by six evenly-spaced straight lines radiating from the center.
2024-11-09 19:47:51,839 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:47:51,840 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:47:51,840 - INFO - [IRIS] - Starting drawing: A series of twelve concentric circles centered at (400,200), intersected by six evenly-spaced straight lines radiating from the center.
2024-11-09 19:48:04,664 - ERROR - [IRIS] - Drawing Error: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 299, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:48:04,671 - ERROR - [IRIS] - Loop Error: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 397, in run
    await self.execute_drawing(websocket, instructions, idea)
  File "C:\Users\ali45\asda\main.py", line 308, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:48:04,675 - ERROR - [IRIS] - Critical error in run loop: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 407, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:48:04,677 - ERROR - [IRIS] - Error in connection ws_20241109_194647_365246: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 648, in websocket_endpoint
    await manager.bot.run(websocket)
  File "C:\Users\ali45\asda\main.py", line 407, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:48:04,681 - INFO - [IRIS] - Connection ws_20241109_194647_365246 cleaned up
2024-11-09 19:48:05,352 - INFO - [IRIS] - New connection: ws_20241109_194805_352172
2024-11-09 19:48:05,353 - INFO - [IRIS] - Connection ws_20241109_194805_352172 accepted
2024-11-09 19:48:05,353 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:48:06,337 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:48:06,340 - INFO - [IRIS] - Generated idea: A large central circle at (400,200) with 12 evenly-spaced straight lines radiating outward like sunbeams, each line extending to the canvas edges.
2024-11-09 19:48:06,341 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:48:06,342 - INFO - [IRIS] - 
Generating instructions for: A large central circle at (400,200) with 12 evenly-spaced straight lines radiating outward like sunbeams, each line extending to the canvas edges.
2024-11-09 19:48:06,342 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:48:06,343 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:48:06,344 - INFO - [IRIS] - Starting drawing: A large central circle at (400,200) with 12 evenly-spaced straight lines radiating outward like sunbeams, each line extending to the canvas edges.
2024-11-09 19:48:09,791 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:48:11,588 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:48:11,589 - INFO - [IRIS] - Generated idea: A series of concentric circles emanating from the center point (400,200), intersected by diagonal lines radiating outward at 45-degree intervals.
2024-11-09 19:48:11,590 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:48:11,590 - INFO - [IRIS] - 
Generating instructions for: A series of concentric circles emanating from the center point (400,200), intersected by diagonal lines radiating outward at 45-degree intervals.
2024-11-09 19:48:11,591 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:48:11,591 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:48:11,591 - INFO - [IRIS] - Starting drawing: A series of concentric circles emanating from the center point (400,200), intersected by diagonal lines radiating outward at 45-degree intervals.
2024-11-09 19:48:27,226 - ERROR - [IRIS] - Drawing Error: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 299, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 338, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2024-11-09 19:48:27,229 - ERROR - [IRIS] - Loop Error: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 299, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 338, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 397, in run
    await self.execute_drawing(websocket, instructions, idea)
  File "C:\Users\ali45\asda\main.py", line 308, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 338, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2024-11-09 19:48:27,235 - ERROR - [IRIS] - Critical error in run loop: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 299, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 338, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 397, in run
    await self.execute_drawing(websocket, instructions, idea)
  File "C:\Users\ali45\asda\main.py", line 308, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 338, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 407, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 338, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2024-11-09 19:48:27,240 - ERROR - [IRIS] - Error in connection ws_20241109_194647_396682: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 299, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 338, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 397, in run
    await self.execute_drawing(websocket, instructions, idea)
  File "C:\Users\ali45\asda\main.py", line 308, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 338, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 648, in websocket_endpoint
    await manager.bot.run(websocket)
  File "C:\Users\ali45\asda\main.py", line 407, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 338, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2024-11-09 19:48:27,245 - INFO - [IRIS] - Connection ws_20241109_194647_396682 cleaned up
2024-11-09 19:48:27,540 - INFO - [IRIS] - Connection ws_20241109_194805_352172 cleaned up
2024-11-09 19:49:25,834 - INFO - [IRIS] - New connection: ws_20241109_194925_833693
2024-11-09 19:49:25,835 - INFO - [IRIS] - Connection ws_20241109_194925_833693 accepted
2024-11-09 19:49:25,835 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:49:25,900 - INFO - [IRIS] - New connection: ws_20241109_194925_900274
2024-11-09 19:49:25,900 - INFO - [IRIS] - Connection ws_20241109_194925_900274 accepted
2024-11-09 19:49:25,901 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:49:26,728 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:49:26,732 - INFO - [IRIS] - Generated idea: Concentric circles ripple outward from the center while a single logarithmic spiral weaves through them like a thread.
2024-11-09 19:49:26,733 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:49:26,734 - INFO - [IRIS] - 
Generating instructions for: Concentric circles ripple outward from the center while a single logarithmic spiral weaves through them like a thread.
2024-11-09 19:49:26,734 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:49:26,735 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:49:26,736 - INFO - [IRIS] - Starting drawing: Concentric circles ripple outward from the center while a single logarithmic spiral weaves through them like a thread.
2024-11-09 19:49:26,925 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:49:26,927 - INFO - [IRIS] - Generated idea: A series of concentric circles emanating from the center point (400,200), intersected by straight diagonal lines radiating outward at 45-degree intervals.
2024-11-09 19:49:26,928 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:49:26,930 - INFO - [IRIS] - 
Generating instructions for: A series of concentric circles emanating from the center point (400,200), intersected by straight diagonal lines radiating outward at 45-degree intervals.
2024-11-09 19:49:26,930 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:49:26,931 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:49:26,932 - INFO - [IRIS] - Starting drawing: A series of concentric circles emanating from the center point (400,200), intersected by straight diagonal lines radiating outward at 45-degree intervals.
2024-11-09 19:49:51,708 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:49:51,880 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:49:52,856 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:49:52,859 - INFO - [IRIS] - Generated idea: A large circle at the center with twelve smaller circles arranged around its perimeter, connected by straight lines to form a radial star pattern.
2024-11-09 19:49:52,860 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:49:52,860 - INFO - [IRIS] - 
Generating instructions for: A large circle at the center with twelve smaller circles arranged around its perimeter, connected by straight lines to form a radial star pattern.
2024-11-09 19:49:52,861 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:49:52,862 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:49:52,863 - INFO - [IRIS] - Starting drawing: A large circle at the center with twelve smaller circles arranged around its perimeter, connected by straight lines to form a radial star pattern.
2024-11-09 19:49:54,282 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:49:54,283 - INFO - [IRIS] - Generated idea: A series of concentric circles rippling outward from the center point (400,200), intersected by straight diagonal lines radiating from the same origin.
2024-11-09 19:49:54,285 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:49:54,285 - INFO - [IRIS] - 
Generating instructions for: A series of concentric circles rippling outward from the center point (400,200), intersected by straight diagonal lines radiating from the same origin.
2024-11-09 19:49:54,286 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:49:54,287 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:49:54,287 - INFO - [IRIS] - Starting drawing: A series of concentric circles rippling outward from the center point (400,200), intersected by straight diagonal lines radiating from the same origin.
2024-11-09 19:50:17,679 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:50:19,208 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:50:22,604 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:50:22,605 - INFO - [IRIS] - Generated idea: A large central circle at (400,200) surrounded by six smaller circles arranged in a hexagonal pattern, with straight lines connecting their centers.
2024-11-09 19:50:22,606 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:50:22,606 - INFO - [IRIS] - 
Generating instructions for: A large central circle at (400,200) surrounded by six smaller circles arranged in a hexagonal pattern, with straight lines connecting their centers.
2024-11-09 19:50:22,607 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:50:22,607 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:50:22,608 - INFO - [IRIS] - Starting drawing: A large central circle at (400,200) surrounded by six smaller circles arranged in a hexagonal pattern, with straight lines connecting their centers.
2024-11-09 19:50:24,709 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:50:24,711 - INFO - [IRIS] - Generated idea: A logarithmic spiral emerges from the center point (400,200) while radiating straight lines intersect it at equal angles, creating a mesmerizing sunburst pattern.
2024-11-09 19:50:24,712 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:50:24,712 - INFO - [IRIS] - 
Generating instructions for: A logarithmic spiral emerges from the center point (400,200) while radiating straight lines intersect it at equal angles, creating a mesmerizing sunburst pattern.
2024-11-09 19:50:24,713 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:50:24,713 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:50:24,714 - INFO - [IRIS] - Starting drawing: A logarithmic spiral emerges from the center point (400,200) while radiating straight lines intersect it at equal angles, creating a mesmerizing sunburst pattern.
2024-11-09 19:50:24,715 - ERROR - [IRIS] - Drawing Error: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 275, in execute_drawing
    await self.update_status(websocket, idea=idea, current_action="Starting new drawing")
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:50:24,720 - ERROR - [IRIS] - Loop Error: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 397, in run
    await self.execute_drawing(websocket, instructions, idea)
  File "C:\Users\ali45\asda\main.py", line 308, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:50:24,724 - ERROR - [IRIS] - Critical error in run loop: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 407, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:50:24,727 - ERROR - [IRIS] - Error in connection ws_20241109_194925_833693: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 648, in websocket_endpoint
    await manager.bot.run(websocket)
  File "C:\Users\ali45\asda\main.py", line 407, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:50:24,731 - INFO - [IRIS] - Connection ws_20241109_194925_833693 cleaned up
2024-11-09 19:50:31,324 - INFO - [IRIS] - New connection: ws_20241109_195031_324043
2024-11-09 19:50:31,325 - INFO - [IRIS] - Connection ws_20241109_195031_324043 accepted
2024-11-09 19:50:31,326 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:50:33,505 - ERROR - [IRIS] - Drawing Error: sent 1012 (service restart); no close frame received
Traceback (most recent call last):
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1279, in close_connection
    await self.transfer_data_task
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 945, in transfer_data
    message = await self.read_message()
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1015, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1090, in read_data_frame
    frame = await self.read_frame(max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1147, in read_frame
    frame = await Frame.read(
            ^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\framing.py", line 71, in read
    data = await reader(2)
           ^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\asyncio\streams.py", line 729, in readexactly
    await self._wait_for_data('readexactly')
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\asyncio\streams.py", line 522, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 299, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: sent 1012 (service restart); no close frame received
2024-11-09 19:50:33,512 - ERROR - [IRIS] - Loop Error: sent 1012 (service restart); no close frame received
Traceback (most recent call last):
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1279, in close_connection
    await self.transfer_data_task
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 945, in transfer_data
    message = await self.read_message()
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1015, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1090, in read_data_frame
    frame = await self.read_frame(max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1147, in read_frame
    frame = await Frame.read(
            ^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\framing.py", line 71, in read
    data = await reader(2)
           ^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\asyncio\streams.py", line 729, in readexactly
    await self._wait_for_data('readexactly')
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\asyncio\streams.py", line 522, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 397, in run
    await self.execute_drawing(websocket, instructions, idea)
  File "C:\Users\ali45\asda\main.py", line 308, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: sent 1012 (service restart); no close frame received
2024-11-09 19:50:33,517 - ERROR - [IRIS] - Critical error in run loop: sent 1012 (service restart); no close frame received
Traceback (most recent call last):
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1279, in close_connection
    await self.transfer_data_task
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 945, in transfer_data
    message = await self.read_message()
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1015, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1090, in read_data_frame
    frame = await self.read_frame(max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1147, in read_frame
    frame = await Frame.read(
            ^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\framing.py", line 71, in read
    data = await reader(2)
           ^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\asyncio\streams.py", line 729, in readexactly
    await self._wait_for_data('readexactly')
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\asyncio\streams.py", line 522, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 407, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: sent 1012 (service restart); no close frame received
2024-11-09 19:50:33,523 - ERROR - [IRIS] - Error in connection ws_20241109_194925_900274: sent 1012 (service restart); no close frame received
Traceback (most recent call last):
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1279, in close_connection
    await self.transfer_data_task
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 945, in transfer_data
    message = await self.read_message()
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1015, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1090, in read_data_frame
    frame = await self.read_frame(max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1147, in read_frame
    frame = await Frame.read(
            ^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\framing.py", line 71, in read
    data = await reader(2)
           ^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\asyncio\streams.py", line 729, in readexactly
    await self._wait_for_data('readexactly')
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\asyncio\streams.py", line 522, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 648, in websocket_endpoint
    await manager.bot.run(websocket)
  File "C:\Users\ali45\asda\main.py", line 407, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: sent 1012 (service restart); no close frame received
2024-11-09 19:50:33,528 - INFO - [IRIS] - Connection ws_20241109_194925_900274 cleaned up
2024-11-09 19:50:33,680 - INFO - [IRIS] - Connection ws_20241109_195031_324043 cleaned up
2024-11-09 19:50:36,774 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:51:02,660 - INFO - [IRIS] - New connection: ws_20241109_195102_660181
2024-11-09 19:51:02,662 - INFO - [IRIS] - Connection ws_20241109_195102_660181 accepted
2024-11-09 19:51:02,662 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:51:07,074 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:51:07,077 - INFO - [IRIS] - Generated idea: A series of concentric circles intersected by diagonal lines radiating from the center at 30-degree intervals.
2024-11-09 19:51:07,078 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:51:07,079 - INFO - [IRIS] - 
Generating instructions for: A series of concentric circles intersected by diagonal lines radiating from the center at 30-degree intervals.
2024-11-09 19:51:07,080 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:51:07,080 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:51:07,081 - INFO - [IRIS] - Starting drawing: A series of concentric circles intersected by diagonal lines radiating from the center at 30-degree intervals.
2024-11-09 19:51:22,424 - ERROR - [IRIS] - Drawing Error: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 299, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 338, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2024-11-09 19:51:22,428 - ERROR - [IRIS] - Loop Error: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 299, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 338, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 397, in run
    await self.execute_drawing(websocket, instructions, idea)
  File "C:\Users\ali45\asda\main.py", line 308, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 338, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2024-11-09 19:51:22,432 - ERROR - [IRIS] - Critical error in run loop: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 299, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 338, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 397, in run
    await self.execute_drawing(websocket, instructions, idea)
  File "C:\Users\ali45\asda\main.py", line 308, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 338, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 407, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 338, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2024-11-09 19:51:22,438 - ERROR - [IRIS] - Error in connection ws_20241109_195102_660181: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 299, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 338, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 397, in run
    await self.execute_drawing(websocket, instructions, idea)
  File "C:\Users\ali45\asda\main.py", line 308, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 338, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 648, in websocket_endpoint
    await manager.bot.run(websocket)
  File "C:\Users\ali45\asda\main.py", line 407, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 338, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2024-11-09 19:51:22,444 - INFO - [IRIS] - Connection ws_20241109_195102_660181 cleaned up
2024-11-09 19:51:22,813 - INFO - [IRIS] - New connection: ws_20241109_195122_813051
2024-11-09 19:51:22,814 - INFO - [IRIS] - Connection ws_20241109_195122_813051 accepted
2024-11-09 19:51:22,814 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:51:24,299 - INFO - [IRIS] - New connection: ws_20241109_195124_299451
2024-11-09 19:51:24,300 - INFO - [IRIS] - Connection ws_20241109_195124_299451 accepted
2024-11-09 19:51:24,311 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:51:25,215 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:51:25,217 - INFO - [IRIS] - Generated idea: A large central circle with radius 150 surrounded by six evenly-spaced smaller circles of radius 50, connected by straight lines to form a flower-like pattern.
2024-11-09 19:51:25,217 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:51:25,218 - INFO - [IRIS] - 
Generating instructions for: A large central circle with radius 150 surrounded by six evenly-spaced smaller circles of radius 50, connected by straight lines to form a flower-like pattern.
2024-11-09 19:51:25,218 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:51:25,219 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:51:25,220 - INFO - [IRIS] - Starting drawing: A large central circle with radius 150 surrounded by six evenly-spaced smaller circles of radius 50, connected by straight lines to form a flower-like pattern.
2024-11-09 19:51:26,456 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:51:26,458 - INFO - [IRIS] - Generated idea: A logarithmic spiral emerges from the center point (400,200), intersecting with six concentric circles of increasing radius.
2024-11-09 19:51:26,458 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:51:26,459 - INFO - [IRIS] - 
Generating instructions for: A logarithmic spiral emerges from the center point (400,200), intersecting with six concentric circles of increasing radius.
2024-11-09 19:51:26,459 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:51:26,460 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:51:26,460 - INFO - [IRIS] - Starting drawing: A logarithmic spiral emerges from the center point (400,200), intersecting with six concentric circles of increasing radius.
2024-11-09 19:51:50,157 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:51:51,557 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:51:55,420 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:51:55,422 - INFO - [IRIS] - Generated idea: A series of twelve concentric circles radiating from the center point (400,200), intersected by six equally-spaced straight lines extending from the same center to the canvas edges.
2024-11-09 19:51:55,423 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:51:55,424 - INFO - [IRIS] - 
Generating instructions for: A series of twelve concentric circles radiating from the center point (400,200), intersected by six equally-spaced straight lines extending from the same center to the canvas edges.
2024-11-09 19:51:55,424 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:51:55,425 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:51:55,425 - INFO - [IRIS] - Starting drawing: A series of twelve concentric circles radiating from the center point (400,200), intersected by six equally-spaced straight lines extending from the same center to the canvas edges.
2024-11-09 19:51:55,607 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:51:55,609 - INFO - [IRIS] - Generated idea: Twelve concentric circles radiating outward from the center point (400,200), intersected by diagonal lines creating a starburst effect.
2024-11-09 19:51:55,609 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:51:55,610 - INFO - [IRIS] - 
Generating instructions for: Twelve concentric circles radiating outward from the center point (400,200), intersected by diagonal lines creating a starburst effect.
2024-11-09 19:51:55,611 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:51:55,611 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:51:55,612 - INFO - [IRIS] - Starting drawing: Twelve concentric circles radiating outward from the center point (400,200), intersected by diagonal lines creating a starburst effect.
2024-11-09 19:52:20,193 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:52:20,521 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:52:24,939 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:52:24,942 - INFO - [IRIS] - Generated idea: A series of 12 concentric circles centered at (400,200) intersected by 6 evenly-spaced diagonal lines radiating from the center.
2024-11-09 19:52:24,943 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:52:24,943 - INFO - [IRIS] - 
Generating instructions for: A series of 12 concentric circles centered at (400,200) intersected by 6 evenly-spaced diagonal lines radiating from the center.
2024-11-09 19:52:24,944 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:52:24,945 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:52:24,945 - INFO - [IRIS] - Starting drawing: A series of 12 concentric circles centered at (400,200) intersected by 6 evenly-spaced diagonal lines radiating from the center.
2024-11-09 19:52:26,094 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:52:26,095 - INFO - [IRIS] - Generated idea: A series of 12 concentric circles radiating from the center point (400,200), intersected by 6 straight lines extending from the same center at 30-degree intervals.
2024-11-09 19:52:26,096 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:52:26,096 - INFO - [IRIS] - 
Generating instructions for: A series of 12 concentric circles radiating from the center point (400,200), intersected by 6 straight lines extending from the same center at 30-degree intervals.
2024-11-09 19:52:26,097 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:52:26,098 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:52:26,098 - INFO - [IRIS] - Starting drawing: A series of 12 concentric circles radiating from the center point (400,200), intersected by 6 straight lines extending from the same center at 30-degree intervals.
2024-11-09 19:52:49,872 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:52:51,119 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:52:57,888 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:52:57,889 - INFO - [IRIS] - Generated idea: A series of twelve concentric circles centered at (400,200) intersected by diagonal lines radiating from the same center point.
2024-11-09 19:52:57,889 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:52:57,890 - INFO - [IRIS] - 
Generating instructions for: A series of twelve concentric circles centered at (400,200) intersected by diagonal lines radiating from the same center point.
2024-11-09 19:52:57,891 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:52:57,892 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:52:57,893 - INFO - [IRIS] - Starting drawing: A series of twelve concentric circles centered at (400,200) intersected by diagonal lines radiating from the same center point.
2024-11-09 19:52:58,237 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:52:58,239 - INFO - [IRIS] - Generated idea: A series of 12 concentric circles centered at (400,200) intersected by straight lines radiating outward at 30-degree intervals.
2024-11-09 19:52:58,241 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:52:58,241 - INFO - [IRIS] - 
Generating instructions for: A series of 12 concentric circles centered at (400,200) intersected by straight lines radiating outward at 30-degree intervals.
2024-11-09 19:52:58,242 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:52:58,242 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:52:58,243 - INFO - [IRIS] - Starting drawing: A series of 12 concentric circles centered at (400,200) intersected by straight lines radiating outward at 30-degree intervals.
2024-11-09 19:53:22,756 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:53:23,177 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:53:29,115 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:53:29,117 - INFO - [IRIS] - Generated idea: A series of twelve concentric circles centered at (400,200) intersected by diagonal lines radiating from the same center point at 30-degree intervals.
2024-11-09 19:53:29,118 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:53:29,118 - INFO - [IRIS] - 
Generating instructions for: A series of twelve concentric circles centered at (400,200) intersected by diagonal lines radiating from the same center point at 30-degree intervals.
2024-11-09 19:53:29,120 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:53:29,121 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:53:29,121 - INFO - [IRIS] - Starting drawing: A series of twelve concentric circles centered at (400,200) intersected by diagonal lines radiating from the same center point at 30-degree intervals.
2024-11-09 19:53:29,296 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:53:29,298 - INFO - [IRIS] - Generated idea: Twelve concentric circles radiate outward from the center point (400,200), intersected by six straight lines that extend from the same center to create a starburst effect.
2024-11-09 19:53:29,299 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:53:29,299 - INFO - [IRIS] - 
Generating instructions for: Twelve concentric circles radiate outward from the center point (400,200), intersected by six straight lines that extend from the same center to create a starburst effect.
2024-11-09 19:53:29,300 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:53:29,300 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:53:29,301 - INFO - [IRIS] - Starting drawing: Twelve concentric circles radiate outward from the center point (400,200), intersected by six straight lines that extend from the same center to create a starburst effect.
2024-11-09 19:53:54,194 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:53:54,287 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:53:55,682 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:53:55,684 - INFO - [IRIS] - Generated idea: A series of concentric circles rippling outward from the center point (400,200), intersected by straight diagonal lines radiating from the same origin.
2024-11-09 19:53:55,684 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:53:55,685 - INFO - [IRIS] - 
Generating instructions for: A series of concentric circles rippling outward from the center point (400,200), intersected by straight diagonal lines radiating from the same origin.
2024-11-09 19:53:55,686 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:53:55,687 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:53:55,688 - INFO - [IRIS] - Starting drawing: A series of concentric circles rippling outward from the center point (400,200), intersected by straight diagonal lines radiating from the same origin.
2024-11-09 19:53:55,827 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:53:55,829 - INFO - [IRIS] - Generated idea: A series of concentric circles intersected by diagonal lines radiating from the center at 30-degree intervals.
2024-11-09 19:53:55,830 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:53:55,831 - INFO - [IRIS] - 
Generating instructions for: A series of concentric circles intersected by diagonal lines radiating from the center at 30-degree intervals.
2024-11-09 19:53:55,832 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:53:55,833 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:53:55,834 - INFO - [IRIS] - Starting drawing: A series of concentric circles intersected by diagonal lines radiating from the center at 30-degree intervals.
2024-11-09 19:54:18,240 - INFO - [IRIS] - Connection ws_20241109_195124_299451 cleaned up
2024-11-09 19:54:18,246 - INFO - [IRIS] - Connection ws_20241109_195122_813051 cleaned up
2024-11-09 19:54:23,839 - INFO - [IRIS] - New connection: ws_20241109_195423_839921
2024-11-09 19:54:23,841 - INFO - [IRIS] - Connection ws_20241109_195423_839921 accepted
2024-11-09 19:54:23,841 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:54:26,749 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:54:26,754 - INFO - [IRIS] - Generated idea: A series of concentric circles intersected by diagonal lines radiating from the center point (400,200) at 30-degree intervals.
2024-11-09 19:54:26,755 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:54:26,755 - INFO - [IRIS] - 
Generating instructions for: A series of concentric circles intersected by diagonal lines radiating from the center point (400,200) at 30-degree intervals.
2024-11-09 19:54:26,756 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:54:26,757 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:54:26,757 - INFO - [IRIS] - Starting drawing: A series of concentric circles intersected by diagonal lines radiating from the center point (400,200) at 30-degree intervals.
2024-11-09 19:54:51,926 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:54:56,268 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:54:56,271 - INFO - [IRIS] - Generated idea: A perfect circle at (400,200) surrounded by six evenly-spaced spirals that unfurl outward like petals.
2024-11-09 19:54:56,271 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:54:56,271 - INFO - [IRIS] - 
Generating instructions for: A perfect circle at (400,200) surrounded by six evenly-spaced spirals that unfurl outward like petals.
2024-11-09 19:54:56,272 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:54:56,272 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:54:56,272 - INFO - [IRIS] - Starting drawing: A perfect circle at (400,200) surrounded by six evenly-spaced spirals that unfurl outward like petals.
2024-11-09 19:54:56,274 - ERROR - [IRIS] - Drawing Error: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 275, in execute_drawing
    await self.update_status(websocket, idea=idea, current_action="Starting new drawing")
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:54:56,278 - ERROR - [IRIS] - Loop Error: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 397, in run
    await self.execute_drawing(websocket, instructions, idea)
  File "C:\Users\ali45\asda\main.py", line 308, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:54:56,280 - ERROR - [IRIS] - Critical error in run loop: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 407, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:54:56,283 - ERROR - [IRIS] - Error in connection ws_20241109_195423_839921: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 648, in websocket_endpoint
    await manager.bot.run(websocket)
  File "C:\Users\ali45\asda\main.py", line 407, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:54:56,286 - INFO - [IRIS] - Connection ws_20241109_195423_839921 cleaned up
2024-11-09 19:54:58,107 - INFO - [IRIS] - New connection: ws_20241109_195458_107582
2024-11-09 19:54:58,108 - INFO - [IRIS] - Connection ws_20241109_195458_107582 accepted
2024-11-09 19:54:58,108 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:55:01,765 - INFO - [IRIS] - New connection: ws_20241109_195501_765721
2024-11-09 19:55:01,766 - INFO - [IRIS] - Connection ws_20241109_195501_765721 accepted
2024-11-09 19:55:01,766 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:55:04,736 - INFO - [IRIS] - New connection: ws_20241109_195504_736803
2024-11-09 19:55:04,737 - INFO - [IRIS] - Connection ws_20241109_195504_736803 accepted
2024-11-09 19:55:04,737 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:55:05,304 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:55:05,306 - INFO - [IRIS] - Generated idea: Twelve concentric circles radiate from the center point (400,200), intersected by six equally-spaced straight lines that extend from edge to edge.
2024-11-09 19:55:05,307 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:55:05,307 - INFO - [IRIS] - 
Generating instructions for: Twelve concentric circles radiate from the center point (400,200), intersected by six equally-spaced straight lines that extend from edge to edge.
2024-11-09 19:55:05,308 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:55:05,309 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:55:05,309 - INFO - [IRIS] - Starting drawing: Twelve concentric circles radiate from the center point (400,200), intersected by six equally-spaced straight lines that extend from edge to edge.
2024-11-09 19:55:05,310 - ERROR - [IRIS] - Drawing Error: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 275, in execute_drawing
    await self.update_status(websocket, idea=idea, current_action="Starting new drawing")
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:55:05,313 - ERROR - [IRIS] - Loop Error: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 397, in run
    await self.execute_drawing(websocket, instructions, idea)
  File "C:\Users\ali45\asda\main.py", line 308, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:55:05,315 - ERROR - [IRIS] - Critical error in run loop: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 407, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:55:05,318 - ERROR - [IRIS] - Error in connection ws_20241109_195458_107582: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 648, in websocket_endpoint
    await manager.bot.run(websocket)
  File "C:\Users\ali45\asda\main.py", line 407, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:55:05,322 - INFO - [IRIS] - Connection ws_20241109_195458_107582 cleaned up
2024-11-09 19:55:08,227 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:55:08,227 - INFO - [IRIS] - Generated idea: Thirty concentric circles radiating outward from the center point (400,200), intersected by six equally-spaced straight lines extending from the same center.
2024-11-09 19:55:08,229 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:55:08,229 - INFO - [IRIS] - 
Generating instructions for: Thirty concentric circles radiating outward from the center point (400,200), intersected by six equally-spaced straight lines extending from the same center.
2024-11-09 19:55:08,230 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:55:08,231 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:55:08,231 - INFO - [IRIS] - Starting drawing: Thirty concentric circles radiating outward from the center point (400,200), intersected by six equally-spaced straight lines extending from the same center.
2024-11-09 19:55:08,232 - ERROR - [IRIS] - Drawing Error: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 275, in execute_drawing
    await self.update_status(websocket, idea=idea, current_action="Starting new drawing")
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:55:08,233 - ERROR - [IRIS] - Loop Error: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 397, in run
    await self.execute_drawing(websocket, instructions, idea)
  File "C:\Users\ali45\asda\main.py", line 308, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:55:08,237 - ERROR - [IRIS] - Critical error in run loop: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 407, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:55:08,240 - ERROR - [IRIS] - Error in connection ws_20241109_195501_765721: received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 648, in websocket_endpoint
    await manager.bot.run(websocket)
  File "C:\Users\ali45\asda\main.py", line 407, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2024-11-09 19:55:08,243 - INFO - [IRIS] - Connection ws_20241109_195501_765721 cleaned up
2024-11-09 19:55:10,653 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:55:10,654 - INFO - [IRIS] - Generated idea: A series of 12 concentric circles centered at (400,200) intersected by diagonal lines radiating from the same center point at 30-degree intervals.
2024-11-09 19:55:10,655 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:55:10,655 - INFO - [IRIS] - 
Generating instructions for: A series of 12 concentric circles centered at (400,200) intersected by diagonal lines radiating from the same center point at 30-degree intervals.
2024-11-09 19:55:10,655 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:55:10,657 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:55:10,657 - INFO - [IRIS] - Starting drawing: A series of 12 concentric circles centered at (400,200) intersected by diagonal lines radiating from the same center point at 30-degree intervals.
2024-11-09 19:55:35,795 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:55:36,683 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:55:36,687 - INFO - [IRIS] - Generated idea: A series of nested circles radiating outward from the center point (400,200), intersected by diagonal lines that create a starburst pattern.
2024-11-09 19:55:36,688 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:55:36,688 - INFO - [IRIS] - 
Generating instructions for: A series of nested circles radiating outward from the center point (400,200), intersected by diagonal lines that create a starburst pattern.
2024-11-09 19:55:36,689 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:55:36,689 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:55:36,690 - INFO - [IRIS] - Starting drawing: A series of nested circles radiating outward from the center point (400,200), intersected by diagonal lines that create a starburst pattern.
2024-11-09 19:56:01,851 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:56:02,930 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:56:02,932 - INFO - [IRIS] - Generated idea: A series of twelve concentric circles centered at (400,200) intersected by diagonal lines radiating from the same center point at 30-degree intervals.
2024-11-09 19:56:02,932 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:56:02,933 - INFO - [IRIS] - 
Generating instructions for: A series of twelve concentric circles centered at (400,200) intersected by diagonal lines radiating from the same center point at 30-degree intervals.
2024-11-09 19:56:02,934 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:56:02,935 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:56:02,936 - INFO - [IRIS] - Starting drawing: A series of twelve concentric circles centered at (400,200) intersected by diagonal lines radiating from the same center point at 30-degree intervals.
2024-11-09 19:56:28,147 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:56:36,302 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:56:36,305 - INFO - [IRIS] - Generated idea: Twelve evenly-spaced circles radiating outward from the center point (400,200), with their radii increasing by 30 pixels each time, intersected by diagonal lines crossing at the center.
2024-11-09 19:56:36,306 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:56:36,306 - INFO - [IRIS] - 
Generating instructions for: Twelve evenly-spaced circles radiating outward from the center point (400,200), with their radii increasing by 30 pixels each time, intersected by diagonal lines crossing at the center.
2024-11-09 19:56:36,306 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:56:36,307 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:56:36,309 - INFO - [IRIS] - Starting drawing: Twelve evenly-spaced circles radiating outward from the center point (400,200), with their radii increasing by 30 pixels each time, intersected by diagonal lines crossing at the center.
2024-11-09 19:57:01,417 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:57:06,752 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:57:06,755 - INFO - [IRIS] - Generated idea: A large central circle at (400,200) with radius 150 surrounded by six evenly-spaced spirals that unfurl outward like petals.
2024-11-09 19:57:06,755 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:57:06,756 - INFO - [IRIS] - 
Generating instructions for: A large central circle at (400,200) with radius 150 surrounded by six evenly-spaced spirals that unfurl outward like petals.
2024-11-09 19:57:06,756 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:57:06,757 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:57:06,757 - INFO - [IRIS] - Starting drawing: A large central circle at (400,200) with radius 150 surrounded by six evenly-spaced spirals that unfurl outward like petals.
2024-11-09 19:57:22,247 - ERROR - [IRIS] - Drawing Error: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 299, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 338, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2024-11-09 19:57:22,250 - ERROR - [IRIS] - Loop Error: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 299, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 338, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 397, in run
    await self.execute_drawing(websocket, instructions, idea)
  File "C:\Users\ali45\asda\main.py", line 308, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 338, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2024-11-09 19:57:22,255 - ERROR - [IRIS] - Critical error in run loop: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 299, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 338, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 397, in run
    await self.execute_drawing(websocket, instructions, idea)
  File "C:\Users\ali45\asda\main.py", line 308, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 338, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 407, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 338, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2024-11-09 19:57:22,260 - ERROR - [IRIS] - Error in connection ws_20241109_195504_736803: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 299, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 338, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 397, in run
    await self.execute_drawing(websocket, instructions, idea)
  File "C:\Users\ali45\asda\main.py", line 308, in execute_drawing
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 338, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 648, in websocket_endpoint
    await manager.bot.run(websocket)
  File "C:\Users\ali45\asda\main.py", line 407, in run
    await self.update_status(
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
    await websocket.send_json(status_data)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 338, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2024-11-09 19:57:22,265 - INFO - [IRIS] - Connection ws_20241109_195504_736803 cleaned up
2024-11-09 19:58:26,381 - INFO - [IRIS] - New connection: ws_20241109_195826_381965
2024-11-09 19:58:26,383 - INFO - [IRIS] - Connection ws_20241109_195826_381965 accepted
2024-11-09 19:58:26,383 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:58:27,517 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:58:27,523 - INFO - [IRIS] - Generated idea: A series of twelve concentric circles centered at (400,200) intersected by diagonal lines radiating from the same center point.
2024-11-09 19:58:27,524 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:58:27,525 - INFO - [IRIS] - 
Generating instructions for: A series of twelve concentric circles centered at (400,200) intersected by diagonal lines radiating from the same center point.
2024-11-09 19:58:27,525 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:58:27,527 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:58:27,527 - INFO - [IRIS] - Starting drawing: A series of twelve concentric circles centered at (400,200) intersected by diagonal lines radiating from the same center point.
2024-11-09 19:58:52,597 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:58:53,374 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:58:53,375 - INFO - [IRIS] - Generated idea: A series of concentric circles intersected by diagonal lines radiating from the center point (400,200).
2024-11-09 19:58:53,376 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:58:53,377 - INFO - [IRIS] - 
Generating instructions for: A series of concentric circles intersected by diagonal lines radiating from the center point (400,200).
2024-11-09 19:58:53,377 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:58:53,379 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:58:53,380 - INFO - [IRIS] - Starting drawing: A series of concentric circles intersected by diagonal lines radiating from the center point (400,200).
2024-11-09 19:59:18,590 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:59:24,299 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:59:24,301 - INFO - [IRIS] - Generated idea: A series of twelve concentric circles radiating from the center point (400,200), intersected by six evenly-spaced straight lines that extend from edge to edge.
2024-11-09 19:59:24,301 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:59:24,302 - INFO - [IRIS] - 
Generating instructions for: A series of twelve concentric circles radiating from the center point (400,200), intersected by six evenly-spaced straight lines that extend from edge to edge.
2024-11-09 19:59:24,302 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:59:24,304 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:59:24,305 - INFO - [IRIS] - Starting drawing: A series of twelve concentric circles radiating from the center point (400,200), intersected by six evenly-spaced straight lines that extend from edge to edge.
2024-11-09 19:59:49,483 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 19:59:50,425 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 19:59:50,427 - INFO - [IRIS] - Generated idea: A series of concentric circles rippling outward from the center point (400,200), intersected by diagonal lines radiating from the same origin.
2024-11-09 19:59:50,428 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 19:59:50,428 - INFO - [IRIS] - 
Generating instructions for: A series of concentric circles rippling outward from the center point (400,200), intersected by diagonal lines radiating from the same origin.
2024-11-09 19:59:50,429 - INFO - [IRIS] - Attempt 1/3
2024-11-09 19:59:50,430 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 19:59:50,431 - INFO - [IRIS] - Starting drawing: A series of concentric circles rippling outward from the center point (400,200), intersected by diagonal lines radiating from the same origin.
2024-11-09 20:00:15,605 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 20:00:16,583 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 20:00:16,586 - INFO - [IRIS] - Generated idea: A series of twelve concentric circles radiating from the center point (400,200), intersected by six equally-spaced straight lines extending from the same center.
2024-11-09 20:00:16,587 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 20:00:16,588 - INFO - [IRIS] - 
Generating instructions for: A series of twelve concentric circles radiating from the center point (400,200), intersected by six equally-spaced straight lines extending from the same center.
2024-11-09 20:00:16,589 - INFO - [IRIS] - Attempt 1/3
2024-11-09 20:00:16,590 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 20:00:16,590 - INFO - [IRIS] - Starting drawing: A series of twelve concentric circles radiating from the center point (400,200), intersected by six equally-spaced straight lines extending from the same center.
2024-11-09 20:00:41,800 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 20:00:48,886 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 20:00:48,889 - INFO - [IRIS] - Generated idea: A logarithmic spiral emanating from the center point (400,200), intersected by twelve evenly-spaced straight lines radiating from the same origin.
2024-11-09 20:00:48,890 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 20:00:48,890 - INFO - [IRIS] - 
Generating instructions for: A logarithmic spiral emanating from the center point (400,200), intersected by twelve evenly-spaced straight lines radiating from the same origin.
2024-11-09 20:00:48,890 - INFO - [IRIS] - Attempt 1/3
2024-11-09 20:00:48,891 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 20:00:48,891 - INFO - [IRIS] - Starting drawing: A logarithmic spiral emanating from the center point (400,200), intersected by twelve evenly-spaced straight lines radiating from the same origin.
2024-11-09 20:01:10,132 - INFO - [IRIS] - New connection: ws_20241109_200110_132422
2024-11-09 20:01:10,133 - INFO - [IRIS] - Connection ws_20241109_200110_132422 accepted
2024-11-09 20:01:10,134 - INFO - [IRIS] - Generating new drawing idea...
2024-11-09 20:01:11,930 - INFO - [httpx] - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-09 20:01:11,932 - INFO - [IRIS] - Generated idea: A large central circle at (400,200) with twelve evenly-spaced straight lines radiating outward like sunbeams, each line extending to the canvas edges.
2024-11-09 20:01:11,932 - INFO - [IRIS] - Getting drawing instructions...
2024-11-09 20:01:11,932 - INFO - [IRIS] - 
Generating instructions for: A large central circle at (400,200) with twelve evenly-spaced straight lines radiating outward like sunbeams, each line extending to the canvas edges.
2024-11-09 20:01:11,933 - INFO - [IRIS] - Attempt 1/3
2024-11-09 20:01:11,934 - INFO - [IRIS] - Instructions validated successfully
2024-11-09 20:01:11,934 - INFO - [IRIS] - Starting drawing: A large central circle at (400,200) with twelve evenly-spaced straight lines radiating outward like sunbeams, each line extending to the canvas edges.
2024-11-09 20:01:13,380 - ERROR - [IRIS] - Drawing Error: sent 1012 (service restart); no close frame received
Traceback (most recent call last):
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1279, in close_connection
    await self.transfer_data_task
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 945, in transfer_data
    message = await self.read_message()
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1015, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1090, in read_data_frame
    frame = await self.read_frame(max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1147, in read_frame
    frame = await Frame.read(
            ^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\framing.py", line 71, in read
    data = await reader(2)
           ^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\asyncio\streams.py", line 729, in readexactly
    await self._wait_for_data('readexactly')
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\asyncio\streams.py", line 522, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 299, in execute_drawing
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: sent 1012 (service restart); no close frame received
2024-11-09 20:01:13,389 - ERROR - [IRIS] - Loop Error: sent 1012 (service restart); no close frame received
Traceback (most recent call last):
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1279, in close_connection
    await self.transfer_data_task
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 945, in transfer_data
    message = await self.read_message()
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1015, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1090, in read_data_frame
    frame = await self.read_frame(max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1147, in read_frame
    frame = await Frame.read(
            ^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\framing.py", line 71, in read
    data = await reader(2)
           ^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\asyncio\streams.py", line 729, in readexactly
    await self._wait_for_data('readexactly')
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\asyncio\streams.py", line 522, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 397, in run
  File "C:\Users\ali45\asda\main.py", line 308, in execute_drawing
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: sent 1012 (service restart); no close frame received
2024-11-09 20:01:13,395 - ERROR - [IRIS] - Critical error in run loop: sent 1012 (service restart); no close frame received
Traceback (most recent call last):
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1279, in close_connection
    await self.transfer_data_task
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 945, in transfer_data
    message = await self.read_message()
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1015, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1090, in read_data_frame
    frame = await self.read_frame(max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1147, in read_frame
    frame = await Frame.read(
            ^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\framing.py", line 71, in read
    data = await reader(2)
           ^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\asyncio\streams.py", line 729, in readexactly
    await self._wait_for_data('readexactly')
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\asyncio\streams.py", line 522, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 407, in run
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: sent 1012 (service restart); no close frame received
2024-11-09 20:01:13,399 - ERROR - [IRIS] - Error in connection ws_20241109_200110_132422: sent 1012 (service restart); no close frame received
Traceback (most recent call last):
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1279, in close_connection
    await self.transfer_data_task
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 945, in transfer_data
    message = await self.read_message()
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1015, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1090, in read_data_frame
    frame = await self.read_frame(max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 1147, in read_frame
    frame = await Frame.read(
            ^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\framing.py", line 71, in read
    data = await reader(2)
           ^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\asyncio\streams.py", line 729, in readexactly
    await self._wait_for_data('readexactly')
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\asyncio\streams.py", line 522, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ali45\asda\main.py", line 648, in websocket_endpoint
  File "C:\Users\ali45\asda\main.py", line 407, in run
  File "C:\Users\ali45\asda\main.py", line 431, in update_status
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 173, in send_json
    await self.send({"type": "websocket.send", "text": text})
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\websockets.py", line 85, in send
    await self._send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in sender
    await send(message)
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 320, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 620, in send
    await self.ensure_open()
  File "C:\Users\ali45\AppData\Local\Programs\Python\Python311\Lib\site-packages\websockets\legacy\protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: sent 1012 (service restart); no close frame received
2024-11-09 20:01:13,404 - INFO - [IRIS] - Connection ws_20241109_200110_132422 cleaned up
2024-11-09 20:01:13,555 - INFO - [IRIS] - Connection ws_20241109_195826_381965 cleaned up
